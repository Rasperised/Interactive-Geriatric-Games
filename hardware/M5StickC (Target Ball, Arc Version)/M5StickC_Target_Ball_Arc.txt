#include <M5StickC.h>

void setup() {
  M5.begin();
  M5.IMU.Init();
  Serial.begin(115200);
}

void loop() {
  float ax, ay, az;
  M5.IMU.getAccelData(&ax, &ay, &az);

  // Same formula, just invert direction
  float angle = -atan2(ax, ay) * 180.0 / PI;

  Serial.println(angle);
  delay(20);
}